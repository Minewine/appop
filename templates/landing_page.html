<!DOCTYPE html>
<html lang="en"> <!-- Default lang, JS will update landing--> 
<head>
  <meta charset="UTF-8">
  <title data-i18n="page.title">The Metric – CV Optimization & Interview Coaching</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body>
  <header class="animate-fade-in">
    <h1 data-i18n="The Metric">The Metric</h1>
    <p class="tagline" data-i18n="tagline">We craft CVs that beat the bots—and prep you to shine in any interview.</p>
    <div class="lang-switch">
      <span data-i18n="lang.label">Language:</span>
      <button onclick="setLang('en')" data-lang="en" class="active">English</button>
      <button onclick="setLang('fr')" data-lang="fr">Français</button>
    </div>
  </header>

  <!-- Section 1: Why -->
  <section>
    <div class="container">
      <h2 data-i18n="why.title">Why The Metric?</h2>
      <p class="section-intro" data-i18n="why.text">
        The job market is tougher than ever. Layoffs are rising. Applications vanish into black holes. Getting hired requires precision—and that’s what we deliver.
      </p>
    </div>
  </section>

  <!-- Section 2: What We Offer -->
  <section>
    <div class="container">
      <h2 data-i18n="what.title">What We Offer</h2>
      <p class="section-intro" data-i18n="what.text">Our tailored services ensure you stand out at every stage of the hiring process.</p>
      <ul class="features-list">
        <li><i class="fa-solid fa-file-signature"></i><div><strong data-i18n="f1.title">CV Optimization:</strong> <span class="feature-text" data-i18n="f1.text">We tailor your CV for each job description so it passes ATS filters and grabs attention.</span></div></li>
        <li><i class="fa-solid fa-magnifying-glass-chart"></i><div><strong data-i18n="f2.title">Job Description Analysis:</strong> <span class="feature-text" data-i18n="f2.text">We decode the tone, values, and priorities of the employer—so you can respond strategically.</span></div></li>
        <li><i class="fa-solid fa-comments"></i><div><strong data-i18n="f3.title">Interview Coaching:</strong> <span class="feature-text" data-i18n="f3.text">If you land an interview, we help you prepare with expert-led rehearsals and tailored scripts.</span></div></li>
        <li><i class="fa-solid fa-book-bookmark"></i><div><strong data-i18n="f4.title">Career Bibliography:</strong> <span class="feature-text" data-i18n="f4.text">In your first session, we document your full professional history—giving us the material to generate compelling applications quickly.</span></div></li>
      </ul>
    </div>
  </section>

  <!-- Section 3: How It Works (Pricing) -->
  <section class="pricing-section">
    <div class="container">
      <h2 data-i18n="how.title">How It Works</h2>
      <p class="section-intro" data-i18n="how.text">A clear, step-by-step process designed for your success, with a guarantee.</p>
      <div class="pricing-steps">
        <div class="pricing-step">
            <span class="step-number" data-i18n="step1.label">Step 1</span>
            <h3 data-i18n="step1.title">Career Bibliography Session</h3>
            <p class="price">CHF 100</p>
            <p data-i18n="step1.desc">We work with you to build a structured narrative of your experience, achievements, and skills.</p>
        </div>
        <div class="pricing-step">
            <span class="step-number" data-i18n="step2.label">Step 2</span>
            <h3 data-i18n="step2.title">Apply for Jobs</h3>
            <p class="price">CHF 400</p>
            <p data-i18n="step2.desc">Covers up to four custom CV + cover letter packages, optimized for each specific job application.</p>
        </div>
        <div class="pricing-step">
             <span class="step-number" data-i18n="step3.label">Step 3</span>
            <h3 data-i18n="step3.title">Guaranteed Interview</h3>
             <p class="price" style="color: var(--accent-green-dark);" data-i18n="step3.price">Money Back</p>
            <p class="guarantee" data-i18n="step3.desc">If none of the four applications lead to an interview, you get a full refund of the CHF 400.</p>
        </div>
         <div class="pricing-step">
             <span class="step-number" data-i18n="step4.label">Step 4</span>
            <h3 data-i18n="step4.title">Interview Prep</h3>
             <p class="price" data-i18n="step4.price">Included*</p>
            <p data-i18n="step4.desc">If you land an interview from our applications, we guide you through expert-led prep sessions.</p>
             <p class="disclaimer" data-i18n="step4.disclaimer">*Prep session included for interviews resulting from our applications.</p>
        </div>
      </div>
      <div class="buttons-container">
        <a href="#" id="book-session" class="cta-button primary" data-i18n="book.button">Book Your Initial Session (CHF 100)</a>
        <a href="#" onclick="goToUploadPage(); return false;" id="test-system" class="cta-button secondary" data-i18n="test.button">Test the System (Demo)</a>
      </div>
    </div>
  </section>

  <!-- Section 4: Stats -->
   <section class="stats-section">
    <div class="container">
        <h2 data-i18n="stats.title">Proven Results</h2>
        <p class="section-intro" data-i18n="stats.text">We measure our success by yours. Here's a glimpse of our impact.</p>
        <div class="stats">
            <div class="stat">
            <i class="fa-solid fa-bullseye"></i>
            <h3>82%</h3>
            <p data-i18n="stat1.desc">Client Interview Rate</p>
            </div>
            <div class="stat">
            <i class="fa-solid fa-file-circle-check"></i>
            <h3>300+</h3>
            <p data-i18n="stat2.desc">Optimized Applications</p>
            </div>
            <div class="stat">
            <i class="fa-solid fa-globe"></i>
            <h3>5+</h3>
            <p data-i18n="stat3.desc">Countries Served</p>
            </div>
        </div>
    </div>
  </section>

  <!-- Sticky CTA -->
  <div class="sticky-cta" id="sticky-cta-banner">
    <span data-i18n="sticky.text">Ready to land your next interview?</span>
    <a href="#book-session" data-i18n="sticky.link">Start with CHF 100</a>
  </div>

  <footer>
    <div class="container">
      © <span id="current-year">2024</span> <span data-i18n="The Metric">The Metric</span>. <span data-i18n="footer.rights">All rights reserved.</span>
    </div>
  </footer>

  <script>
    // --- Translations Object ---
    const translations = {
      en: {
        "page.title": "The Metric – CV Optimization & Interview Coaching",
        "The Metric": "The Metric",
        "tagline": "We craft CVs that beat the bots—and prep you to shine in any interview.",
        "lang.label": "Language:",
        "why.title": "Why The Metric?",
        "why.text": "The job market is tougher than ever. Layoffs are rising. Applications vanish into black holes. Getting hired requires precision—and that’s what we deliver.",
        "what.title": "What We Offer",
        "what.text": "Our tailored services ensure you stand out at every stage of the hiring process.",
        "f1.title": "CV Optimization:",
        "f1.text": "We tailor your CV for each job description so it passes ATS filters and grabs attention.",
        "f2.title": "Job Description Analysis:",
        "f2.text": "We decode the tone, values, and priorities of the employer—so you can respond strategically.",
        "f3.title": "Interview Coaching:",
        "f3.text": "If you land an interview, we help you prepare with expert-led rehearsals and tailored scripts.",
        "f4.title": "Career Bibliography:",
        "f4.text": "In your first session, we document your full professional history—giving us the material to generate compelling applications quickly.",
        "how.title": "How It Works",
        "how.text": "A clear, step-by-step process designed for your success, with a guarantee.",
        "step1.label": "Step 1",
        "step1.title": "Career Bibliography Session",
        "step1.desc": "We work with you to build a structured narrative of your experience, achievements, and skills.",
        "step2.label": "Step 2",
        "step2.title": "Apply for Jobs",
        "step2.desc": "Covers up to four custom CV + cover letter packages, optimized for each specific job application.",
        "step3.label": "Step 3",
        "step3.title": "Guaranteed Interview",
        "step3.price": "Money Back",
        "step3.desc": "If none of the four applications lead to an interview, you get a full refund of the CHF 400.",
        "step4.label": "Step 4",
        "step4.title": "Interview Prep",
        "step4.price": "Included*",
        "step4.desc": "If you land an interview from our applications, we guide you through expert-led prep sessions.",
        "step4.disclaimer": "*Prep session included for interviews resulting from our applications.",
        "book.button": "Book Your Initial Session (CHF 100)",
        "test.button": "Test the System (Demo)",
        "stats.title": "Proven Results",
        "stats.text": "We measure our success by yours. Here's a glimpse of our impact.",
        "stat1.desc": "Client Interview Rate",
        "stat2.desc": "Optimized Applications",
        "stat3.desc": "Countries Served",
        "sticky.text": "Ready to land your next interview?",
        "sticky.link": "Start with CHF 100",
        "footer.rights": "All rights reserved."
      },
      fr: {
        "page.title": "Le Metric – Optimisation de CV & Préparation aux Entretiens",
        "The Metric": "Le Metric",
        "tagline": "Nous créons des CV qui surpassent les filtres ATS et vous préparons à briller en entretien.",
        "lang.label": "Langue :",
        "why.title": "Pourquoi Le Metric ?",
        "why.text": "Le marché du travail est plus compétitif que jamais. Les licenciements augmentent. Les candidatures disparaissent dans des trous noirs. Pour réussir, il faut de la précision—et c’est ce que nous offrons.",
        "what.title": "Ce que nous proposons",
        "what.text": "Nos services personnalisés vous permettent de vous démarquer à chaque étape du processus de recrutement.",
        "f1.title": "Optimisation du CV :",
        "f1.text": "Nous adaptons votre CV à chaque offre afin qu’il passe les filtres ATS et attire l’attention.",
        "f2.title": "Analyse de l'offre d'emploi :",
        "f2.text": "Nous décryptons le ton, les valeurs et les priorités de l'employeur afin de vous aider à répondre stratégiquement.",
        "f3.title": "Préparation à l'entretien :",
        "f3.text": "Si vous obtenez un entretien, nous vous préparons avec des répétitions guidées par un expert et des scripts personnalisés.",
        "f4.title": "Bibliographie de carrière :",
        "f4.text": "Lors de votre première session, nous documentons tout votre parcours professionnel pour générer des candidatures percutantes.",
        "how.title": "Comment ça marche",
        "how.text": "Un processus clair et étape par étape conçu pour votre succès, avec une garantie.",
        "step1.label": "Étape 1",
        "step1.title": "Session Bibliographie de Carrière",
        "step1.desc": "Nous travaillons avec vous pour construire un récit structuré de votre expérience, de vos réalisations et de vos compétences.",
        "step2.label": "Étape 2",
        "step2.title": "Postuler aux Offres",
        "step2.desc": "Couvre jusqu'à quatre dossiers CV + lettre de motivation personnalisés, optimisés pour chaque offre d'emploi spécifique.",
        "step3.label": "Étape 3",
        "step3.title": "Entretien Garanti",
        "step3.price": "Remboursé",
        "step3.desc": "Si aucune des quatre candidatures ne débouche sur un entretien, vous êtes intégralement remboursé des CHF 400.",
        "step4.label": "Étape 4",
        "step4.title": "Préparation à l'Entretien",
        "step4.price": "Inclus*",
        "step4.desc": "Si vous décrochez un entretien grâce à nos candidatures, nous vous guidons à travers des sessions de préparation expertes.",
        "step4.disclaimer": "*Session de préparation incluse pour les entretiens résultant de nos candidatures.",
        "book.button": "Réserver la session initiale (CHF 100)",
        "test.button": "Tester le système (Démo)",
        "stats.title": "Résultats Prouvés",
        "stats.text": "Nous mesurons notre succès au vôtre. Voici un aperçu de notre impact.",
        "stat1.desc": "Taux d'Entretiens Clients",
        "stat2.desc": "Candidatures Optimisées",
        "stat3.desc": "Pays Desservis",
        "sticky.text": "Prêt(e) à décrocher votre prochain entretien ?",
        "sticky.link": "Commencez avec CHF 100",
        "footer.rights": "Tous droits réservés."
      }
    };

    // --- Get app root from template context (set in Flask route) ---
    const APP_ROOT = "{{ app_root|default('/') }}".replace(/\/+$/, '');

    // --- Language Switching Function ---
    function setLang(lang) {
      // **** Start Debugging Logs ****
      console.log(`DEBUG: setLang called with language: ${lang}`);
      // **** End Debugging Logs ****

      // Ensure the requested language exists in translations, fallback to 'en'
      const effectiveLang = translations[lang] ? lang : 'en';
      // **** Start Debugging Logs ****
      console.log(`DEBUG: Effective language set to: ${effectiveLang}`);
      // **** End Debugging Logs ****


      localStorage.setItem('lang', effectiveLang);
      document.documentElement.lang = effectiveLang;

      const dictionary = translations[effectiveLang];
      const defaultDictionary = translations['en']; // English for fallback

      // **** Start Debugging Logs ****
      if (!dictionary) {
          console.error(`DEBUG: Translation dictionary for "${effectiveLang}" not found!`);
          // If the dictionary is missing, we might as well stop here or only use fallback
          // For robustness, we'll continue and rely on the fallback logic below.
      }
      // **** End Debugging Logs ****


      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        let text; // Variable to hold the final text

        // Try to get text from the selected language dictionary
        if (dictionary) {
            text = dictionary[key];
        }

        // If not found in the target language, try the English fallback dictionary
        if (text === undefined && defaultDictionary) {
            text = defaultDictionary[key];
        }

        // If still not found (or dictionaries were missing), use original text content as a last resort
        if (text === undefined) {
            // **** Start Debugging Logs ****
            // console.warn(`DEBUG: Translation key "${key}" not found in "${effectiveLang}" or "en". Using original text.`);
            // **** End Debugging Logs ****
             // Use original text/value depending on element type
            text = (el.tagName === 'INPUT' && el.type === 'submit') ? el.value : el.textContent;
        }

        // Update element content based on tag type
        if (el.tagName === 'TITLE') {
            document.title = text;
        } else {
             // We generally set textContent for buttons/links in this design
            el.textContent = text;
        }
      });

      // Update active button style
      document.querySelectorAll('.lang-switch button').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === effectiveLang);
      });
      // **** Start Debugging Logs ****
      console.log(`DEBUG: Language setting process complete for: ${effectiveLang}`);
      // **** End Debugging Logs ****
    }

    // --- Navigation Function for Upload Page ---
    function goToUploadPage() {
      const currentLang = localStorage.getItem('lang') || 'en';
      
      // Build the relative paths using the APP_ROOT for consistent behavior
      const authPath = '/auth/login';
      const uploadPath = '/analysis/upload';
      
      // Construct full URL with proper parameters
      const loginUrl = `/appop${authPath}?next=${encodeURIComponent('/appop' + uploadPath)}&lang=${currentLang}`;
      console.log("Navigating to:", loginUrl); // For debugging
      window.location.href = loginUrl;
    }

    // --- Sticky CTA Logic ---
    const stickyBanner = document.getElementById('sticky-cta-banner');
    if (stickyBanner) {
        let triggered = false;
        const checkAndToggleBanner = () => {
            const showThreshold = 400;
            const isSmallScreen = window.innerWidth < 768;
            const mobileShowThreshold = 150;
            const currentScrollY = window.scrollY;
            const effectiveShowThreshold = isSmallScreen ? mobileShowThreshold : showThreshold;
            if (currentScrollY > effectiveShowThreshold && !triggered) {
                stickyBanner.classList.add('visible');
                triggered = true;
            }
            // Optional Hide Logic (uncomment if needed)
            // else if (currentScrollY <= (effectiveShowThreshold / 2) && triggered) {
            //    stickyBanner.classList.remove('visible');
            //    triggered = false;
            // }
        };
        window.addEventListener('scroll', checkAndToggleBanner, { passive: true });
        checkAndToggleBanner(); // Initial check
    }

    // --- Set Current Year in Footer ---
    const yearSpan = document.getElementById('current-year');
    if (yearSpan) { yearSpan.textContent = new Date().getFullYear(); }

    // --- Initial Language Load ---
    document.addEventListener('DOMContentLoaded', () => {
      let preferredLang = localStorage.getItem('lang');
      if (!preferredLang) {
          const browserLang = navigator.language.split('-')[0];
          preferredLang = translations[browserLang] ? browserLang : 'en';
      }
      // No longer relying on '{{ lang }}' placeholder here
      console.log("DEBUG: Initial language load using:", preferredLang); // Debug initial lang
      setLang(preferredLang);
    });

  </script>
</body>
</html>