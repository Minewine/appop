--- START OF FILE landing_page.html ---

{% extends "base.html" %}

{% block title %}The Metric – CV Optimization & Interview Coaching{% endblock %}

{% block content %}

<!-- Why The Metric Section -->
<section class="bg-pattern">
  <div class="container">
    <h2 class="section-title" data-i18n="why.title">Why The Metric?</h2>
    <p class="section-intro" data-i18n="why.text">
      The job market is tougher than ever. Layoffs are rising. Applications vanish into black holes.
      Getting hired requires precision—and that's what we deliver.
    </p>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">82%</div>
        <div class="stat-label" data-i18n="stat1.label">Interview Rate</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">300+</div>
        <div class="stat-label" data-i18n="stat2.label">Optimized Applications</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">5+</div>
        <div class="stat-label" data-i18n="stat3.label">Countries Served</div>
      </div>
    </div>
  </div>
</section>

<!-- Services Section -->
<section>
  <div class="container">
    <h2 class="section-title" data-i18n="services.title">Our Services</h2>
    <p class="section-intro" data-i18n="services.intro">
      Our tailored services ensure you stand out at every stage of the hiring process.
    </p>

    <ul class="features-list">
      <li>
        <i class="fa-solid fa-file-signature"></i>
        <div>
          <strong data-i18n="service1.title">CV Optimization</strong>
          <p data-i18n="service1.text">We tailor your CV for each job description so it passes ATS filters and grabs attention.</p>
        </div>
      </li>
      <li>
        <i class="fa-solid fa-magnifying-glass-chart"></i>
        <div>
          <strong data-i18n="service2.title">Job Description Analysis</strong>
          <p data-i18n="service2.text">We decode the tone, values, and priorities of the employer—so you can respond strategically.</p>
        </div>
      </li>
      <li>
        <i class="fa-solid fa-comments"></i>
        <div>
          <strong data-i18n="service3.title">Interview Coaching</strong>
          <p data-i18n="service3.text">If you land an interview, we help you prepare with expert-led rehearsals and tailored scripts.</p>
        </div>
      </li>
      <li>
        <i class="fa-solid fa-book-bookmark"></i>
        <div>
          <strong data-i18n="service4.title">Career Bibliography</strong>
          <p data-i18n="service4.text">In your first session, we document your full professional history—giving us the material to generate compelling applications quickly.</p>
        </div>
      </li>
    </ul>
  </div>
</section>

<!-- How It Works Section -->
<section class="bg-pattern" id="pricing">
  <div class="container">
    <h2 class="section-title" data-i18n="process.title">How It Works</h2>
    <p class="section-intro" data-i18n="process.intro">
      A clear, step-by-step process designed for your success, with a guarantee.
    </p>

    <div class="pricing-steps">
      <div class="pricing-step">
        <span class="step-number" data-i18n="step1.number">Step 1</span>
        <h3 data-i18n="step1.title">Career Bibliography Session</h3>
        <p class="price">CHF 100</p>
        <p data-i18n="step1.description">We work with you to build a structured narrative of your experience, achievements, and skills.</p>
      </div>

      <div class="pricing-step">
        <span class="step-number" data-i18n="step2.number">Step 2</span>
        <h3 data-i18n="step2.title">Apply for Jobs</h3>
        <p class="price">CHF 400</p>
        <p data-i18n="step2.description">Covers up to four custom CV + cover letter packages, optimized for each specific job application.</p>
      </div>

      <div class="pricing-step">
        <span class="step-number" data-i18n="step3.number">Step 3</span>
        <h3 data-i18n="step3.title">Guaranteed Interview</h3>
        <p class="price" style="color: var(--accent-green-dark);">Money Back</p>
        <p class="guarantee" data-i18n="step3.description">If none of the four applications lead to an interview, you get a full refund of the CHF 400.</p>
      </div>

      <div class="pricing-step">
        <span class="step-number" data-i18n="step4.number">Step 4</span>
        <h3 data-i18n="step4.title">Interview Prep</h3>
        <p class="price">Included*</p>
        <p data-i18n="step4.description">If you land an interview from our applications, we guide you through expert-led prep sessions.</p>
        <p class="disclaimer">*Prep session included for interviews resulting from our applications.</p>
      </div>
    </div>

    <div class="actions">
      <a href="{{ url_for('contact.contact') }}" class="btn btn-primary" id="contact-button" data-i18n="contact.button"> {# Use url_for for contact link #}
        <i class="fa-solid fa-envelope"></i>
        <span>Request More Information</span>
      </a>
      {# Add data attributes for URLs and remove onclick #}
      <a href="#" class="btn btn-outline test-system-button" data-i18n="test.button" data-upload-url="{{ upload_url }}" data-login-url="{{ login_url }}">
        <i class="fa-solid fa-vial"></i>
        <span>Test the System (Demo)</span>
      </a>
    </div>
  </div>
</section>

<!-- Testimonials Section -->
<section>
  <div class="container">
    <h2 class="section-title" data-i18n="testimonials.title">Client Success Stories</h2>
    <p class="section-intro" data-i18n="testimonials.intro">
      Don't just take our word for it — hear from professionals who've transformed their job search with The Metric.
    </p>

    <div class="testimonial-slider">
      <div class="testimonial-item">
        <p class="testimonial-text" data-i18n="testimonial1.text">
          "After months of silence from employers, The Metric helped me optimize my CV. Within two weeks,
          I had three interview requests. Their systematic approach made all the difference."
        </p>
        <div class="testimonial-author">
          <div class="testimonial-author-info">
            <h4 data-i18n="testimonial1.name">Sarah T.</h4>
            <p data-i18n="testimonial1.position">Product Manager, Switzerland</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


{% endblock %}

{% block extra_css %}
<style>
  /* Landing page specific styles */
  .hero-section {
    background: var(--gradient-primary);
    padding: 5rem 0 3rem;
    color: white;
    text-align: center;
  }

  .hero-section .page-title {
    margin-top: 0;
  }

  .hero-section h1 {
    color: white;
    font-size: 3.5rem;
    margin-bottom: 1rem;
    font-weight: 800;
  }

  .hero-section .page-subtitle {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.5rem;
    margin-bottom: 2.5rem;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .bg-pattern {
    background-color: var(--light-color);
    position: relative;
  }

  @media (max-width: 768px) {
    .hero-section h1 {
      font-size: 2.5rem;
    }

    .hero-section .page-subtitle {
      font-size: 1.25rem;
    }

    .pricing-steps {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %}

{% block extra_js_body %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize language buttons
    const currentLang = localStorage.getItem('lang') || 'en';
    const langButtons = document.querySelectorAll('[data-lang]');
    langButtons.forEach(btn => {
      if (btn.dataset.lang === currentLang) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }

      btn.addEventListener('click', function() {
        setLang(this.dataset.lang);
      });
    });

    // --- Test System Button Logic ---
    const testButtons = document.querySelectorAll('.test-system-button'); // Use a class if multiple buttons
    testButtons.forEach(testButton => {
        testButton.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default link behavior

            const uploadUrl = this.dataset.uploadUrl; // Get URL from data attribute
            const loginUrl = this.dataset.loginUrl;   // Get URL from data attribute
            const currentLang = localStorage.getItem('lang') || 'en'; // Get latest language preference

            // Check if user is logged in
            // This needs to reliably detect if the user has an active session cookie.
            // You might need to adjust this based on how your auth system sets cookies.
            // Assuming a common cookie like 'session' or 'flask-login' exists when logged in.
            const isLoggedIn = document.cookie.split(';').some(c => {
              const trimmed = c.trim();
              return trimmed.startsWith('session=') || trimmed.startsWith('auth_token=') || trimmed.startsWith('flask-login=');
            });

            let targetUrl;
            // Ensure the upload URL includes the language parameter
            const uploadUrlWithLang = uploadUrl + (uploadUrl.includes('?') ? '&' : '?') + `lang=${currentLang}`;


            if (isLoggedIn) {
              // User is logged in, redirect to upload page
              targetUrl = uploadUrlWithLang;
              console.log("DEBUG (JS): User is logged in, redirecting to", targetUrl);
            } else {
              // User is not logged in, redirect to login with the upload page as the 'next' parameter
              const returnUrl = encodeURIComponent(uploadUrlWithLang);
              targetUrl = `${loginUrl}?next=${returnUrl}`;
              console.log("DEBUG (JS): User is not logged in, redirecting to login", targetUrl);
            }

            window.location.href = targetUrl; // Perform the redirect
        });
    });
    // --- End Test System Button Logic ---

  });

  // Add translations
  if (translations.en) {
    Object.assign(translations.en, {
      "hero.subtitle": "We craft CVs that beat the bots—and prep you to shine in any interview.",
      "cta.primary": "Book Your Initial Session",
      "cta.secondary": "Test the System (Demo)",
      "why.title": "Why The Metric?",
      "why.text": "The job market is tougher than ever. Layoffs are rising. Applications vanish into black holes. Getting hired requires precision—and that's what we deliver.",
      "stat1.label": "Interview Rate",
      "stat2.label": "Optimized Applications",
      "stat3.label": "Countries Served",
      "services.title": "Our Services",
      "services.intro": "Our tailored services ensure you stand out at every stage of the hiring process.",
      "service1.title": "CV Optimization",
      "service1.text": "We tailor your CV for each job description so it passes ATS filters and grabs attention.",
      "service2.title": "Job Description Analysis",
      "service2.text": "We decode the tone, values, and priorities of the employer—so you can respond strategically.",
      "service3.title": "Interview Coaching",
      "service3.text": "If you land an interview, we help you prepare with expert-led rehearsals and tailored scripts.",
      "service4.title": "Career Bibliography",
      "service4.text": "In your first session, we document your full professional history—giving us the material to generate compelling applications quickly.",
      "process.title": "How It Works",
      "process.intro": "A clear, step-by-step process designed for your success, with a guarantee.",
      "step1.number": "Step 1",
      "step1.title": "Career Bibliography Session",
      "step1.description": "We work with you to build a structured narrative of your experience, achievements, and skills.",
      "step2.number": "Step 2",
      "step2.title": "Apply for Jobs",
      "step2.description": "Covers up to four custom CV + cover letter packages, optimized for each specific job application.",
      "step3.number": "Step 3",
      "step3.title": "Guaranteed Interview",
      "step3.description": "If none of the four applications lead to an interview, you get a full refund of the CHF 400.",
      "step4.number": "Step 4",
      "step4.title": "Interview Prep",
      "step4.description": "If you land an interview from our applications, we guide you through expert-led prep sessions.",
      "book.button": "Réserver Votre Session Initiale (CHF 100)", // This looks like French? Fix needed here
      "test.button": "Test the System (Demo)",
      "contact.button": "Request More Information",
      "testimonials.title": "Client Success Stories",
      "testimonials.intro": "Don't just take our word for it — hear from professionals who've transformed their job search with The Metric.",
      "testimonial1.text": "After months of silence from employers, The Metric helped me optimize my CV. Within two weeks, I had three interview requests. Their systematic approach made all the difference.",
      "testimonial1.name": "Sarah T.",
      "testimonial1.position": "Product Manager, Switzerland",
      "final-cta.title": "Ready to Stand Out?",
      "final-cta.text": "Take the first step toward interview success with our proven system.",
      "final-cta.primary": "Book Your Initial Session",
      "final-cta.secondary": "Try Demo First"
    });
  }

  if (translations.fr) {
    Object.assign(translations.fr, {
      "hero.subtitle": "Nous créons des CV qui surpassent les filtres ATS et vous préparons à briller en entretien.",
      "cta.primary": "Réservez Votre Session Initiale",
      "cta.secondary": "Tester le Système (Démo)",
      "why.title": "Pourquoi The Metric?",
      "why.text": "Le marché du travail est plus difficile que jamais. Les licenciements augmentent. Les candidatures disparaissent dans des trous noirs. Réussir son embauche exige de la précision—et c'est ce que nous offrons.",
      "stat1.label": "Taux d'Entretiens",
      "stat2.label": "Candidatures Optimisées",
      "stat3.label": "Pays Servis",
      "services.title": "Nos Services",
      "services.intro": "Nos services sur mesure vous permettent de vous démarquer à chaque étape du processus d'embauche.",
      "service1.title": "Optimisation de CV",
      "service1.text": "Nous adaptons votre CV à chaque description de poste pour qu'il passe les filtres ATS et attire l'attention.",
      "service2.title": "Analyse des Offres d'Emploi",
      "service2.text": "Nous décodons le ton, les valeurs et les priorités de l'employeur pour vous permettre de répondre stratégiquement.",
      "service3.title": "Coaching d'Entretien",
      "service3.text": "Si vous décrochez un entretien, nous vous aidons à vous préparer avec des répétitions dirigées par des experts et des scripts personnalisés.",
      "service4.title": "Bibliographie de Carrière",
      "service4.text": "Lors de votre première session, nous documentons tout votre parcours professionnel pour générer des candidatures percutantes.",
      "process.title": "Comment Ça Fonctionne",
      "process.intro": "Un processus clair et étape par étape conçu pour votre réussite, avec une garantie.",
      "step1.number": "Étape 1",
      "step1.title": "Session Bibliographie de Carrière",
      "step1.description": "Nous travaillons avec vous pour construire un récit structuré de votre expérience, de vos réalisations et de vos compétences.",
      "step2.number": "Étape 2",
      "step2.title": "Postuler aux Emplois",
      "step2.description": "Couvre jusqu'à quatre dossiers CV + lettre de motivation personnalisés, optimisés pour chaque candidature spécifique.",
      "step3.number": "Étape 3",
      "step3.title": "Entretien Garanti",
      "step3.description": "Si aucune des quatre candidatures ne débouche sur un entretien, vous êtes intégralement remboursé des CHF 400.",
      "step4.number": "Étape 4",
      "step4.title": "Préparation à l'Entretien",
      "step4.description": "Si vous décrochez un entretien grâce à nos candidatures, nous vous guidons à travers des sessions de préparation expertes.",
      "book.button": "Réserver Votre Session Initiale (CHF 100)",
      "test.button": "Tester le Système (Démo)",
      "contact.button": "Demander Plus d'Informations",
      "testimonials.title": "Témoignages de Réussite",
      "testimonials.intro": "Ne nous croyez pas sur parole - écoutez les professionnels qui ont transformé leur recherche d'emploi avec The Metric.",
      "testimonial1.text": "Après des mois de silence de la part des employeurs, The Metric m'a aidé à optimiser mon CV. En deux semaines, j'avais trois demandes d'entretien. Leur approche systématique a fait toute la différence.",
      "testimonial1.name": "Sarah T.",
      "testimonial1.position": "Chef de Produit, Suisse",
      "final-cta.title": "Prêt à Vous Démarquer?",
      "final-cta.text": "Faites le premier pas vers le succès en entretien avec notre système éprouvé.",
      "final-cta.primary": "Réserver Votre Session Initiale",
      "final-cta.secondary": "Essayer la Démo d'Abord"
    });
  }

  // The goToUploadPage function is no longer needed as we use event listeners on button click.
  // The button's onclick="goToUploadPage(); return false;" should be removed in the HTML.
  // The logic is now inside the DOMContentLoaded event listener.

</script>
{% endblock %}

--- END OF FILE landing_page.html ---